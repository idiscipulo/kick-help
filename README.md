# Final Project: Kick-Help API
#### Isaiah Discipulo
## Overview
For this project I created a Python API to predict the success of a Kickstarter campaign, called Kick-Help. Kick-Help uses a neural network to estimate the probability of success for a given campaign. This project was concieved at the Sunhacks hackathon, in collaboration with Luis Gomez and Sam Rondinelli. I have since spent the last month improving the API as a solo developer.
## Data
To train my model, I used a dataset of Kickstarter projects, posted on Kaggle by user Kemical. The dataset included over 380,000 projects with several parameters, including Kickstarter category, duration of fundraising, USD goal, and project success. Below is a sample of the raw dataset.
```
1000002330,The Songs of Adelaide & Abullah,Poetry,Publishing,GBP,2015-10-09 11:36:00,1000,2015-08-11 12:12:28,0,failed,0,GB,0,,,,
1000004038,Where is Hank?,Narrative Film,Film & Video,USD,2013-02-26 00:20:50,45000,2013-01-12 00:20:50,220,failed,3,US,220,,,,
1000007540,ToshiCapital Rekordz Needs Help to Complete Album,Music,Music,USD,2012-04-16 04:24:11,5000,2012-03-17 03:24:11,1,failed,1,US,1,,,,
1000011046,Community Film Project: The Art of Neighborhood Filmmaking,Film & Video,Film & Video,USD,2015-08-29 01:00:00,19500,2015-07-04 08:35:03,1283,canceled,14,US,1283,,,,
1000014025,Monarch Espresso Bar,Restaurants,Food,USD,2016-04-01 13:38:27,50000,2016-02-26 13:38:27,52375,successful,224,US,52375,,,,
1000023410,Support Solar Roasted Coffee & Green Energy!  SolarCoffee.co,Food,Food,USD,2014-12-21 18:30:44,1000,2014-12-01 18:30:44,1205,successful,16,US,1205,,,,
1000030581,Chaser Strips. Our Strips make Shots their B*tch!,Drinks,Food,USD,2016-03-17 19:05:12,25000,2016-02-01 20:05:12,453,failed,40,US,453,,,,
1000034518,SPIN - Premium Retractable In-Ear Headphones with Mic,Product Design,Design,USD,2014-05-29 18:14:43,125000,2014-04-24 18:14:43,8233,canceled,58,US,8233,,,,
```
Although I have not confirmed it, I would guess that this dataset was generated by scraping Kickstarter. Unfortunately, certain scraping techniques can be less reliable than say, a Kickstarter API, and the dataset had many flaws. I wrote several functions in Python to clean the data and transfrom it to a useable state. The `clean` function is the top-level command to clean the data. It reads in a csv file, extracting from each line the project name, duration of fundraising, USD goal, and project success. Some of the categories in the dataset are no longer valid Kickstarter categories, so those projects are thrown out. Additionally, I was only interested in projects that completed their fundraising run and either succeded or failed. Many projects in the dataset were cancelled or suspended prior to completing their fundraising run, so those projects were also thrown out. To prepare the data to be fed into the neural network, the projects have their categories enumerated with the `get_category` function and their duration cast from the datetime format to a double. The data is then restructred with the `make_project` function and stored as a csv. The clean dataset has approximately 78,000 projects. Below is a sample of the clean dataset.
```
toshicapital rekordz needs help to complete album,4,2595600.0,5000,0
support solar roasted coffee & green energy!  solarcoffee.co,7,1728000.0,1000,1
the cottage market,12,2592000.0,5000,0
g-spot place for gamers to connect with eachother & go pro!,0,3884400.0,200000,0
survival rings,1,2592000.0,2500,0
mike corey's darkness & light album,4,1296000.0,250,1
boco tea,7,2592000.0,5000,0
cmuk. shoes: take on life feet first.,5,3024000.0,20000,1
```
## Model
To model the success of Kickstarter projects I chose to use a neural network. My motivations behind this were twofold: I had no initial hypothesis about the relationship between the features and success and I have been wanting to learn the TensorFlow and Keras libraries for a while. As mentioned above, I chose to use Kickstarter category, duration of fundraising, and USD goal as the features. My output is binary: did the project succeed or fail at being funded. Prior to training the model, I loaded in the clean dataset and scaled the features using the `scale` function to the domain `[0,1]`. The doubles are then cast to numpy's `float32` and reformatted to arrays. After researching online, I found the reccommended activation function for keras models with binary output is a sigmoid. In the process of training my model, I wanted to determine the optimal tuning parameters. Unfortunately, with a time complexity of `O(n^2)` it was unrealistic to change more than one parameter. I chose to fix the batch size at `50`, the epochs at `1000` and the learning rate at `0.05`. I then varied the number of nodes in a single layer neural network from `1` to `101`. The error was computed using root mean squared and the loss was computed using keras' `binary_accuracy` function. The process, which was automated using the function `model_validate`, found the optimal number of nodes for my data and parameters to be `11`. I then retrained the model with the optimal parameters, but set the epochs to `10,000` to allow for more learning. The final accuracy of the model is approximately `0.65`. This model was then stored for later use.
## Predict
To predict the success of a Kickstarter project, my project scrapes data from the the Kickstarter website and runs it through the trained model.
#### get_page
The `get_page` function returns the Kickstarter project data for the project most closely matching the search terms passed as a parameter. Since various Kickstarter pages have have differnt HTML layouts depending on how the browser and project author chose to format them I had difficulty creating a general scraper to pull data from the project page directly. However, the search projects page on Kickstarter is formatted consistently across all searches, so the `get_page` function pulls the raw JSON data returned as the result of a search. This has the added benifit of the a user only needing to know the relevant search terms to find their project, as opposed to a complete URL.
```
def get_page(title):
	data = {'name': '',
			'category': '',
			'duration': '',
			'goal': ''}
	request_string = 'https://www.kickstarter.com/projects/search.json?search=&term={}'.format('-'.join(title.split(' ')))
	page = requests.get(request_string)
	response = page.json()
	if response['total_hits'] == 0:
		return -1
	else:
		project = response['projects'][0]
		data['name'] = project['name']
		data['category'] = get_category(project['category']['slug'].split('/')[0])
		data['duration'] = np.float32(project['deadline'] - project['launched_at'])
		data['goal'] = np.float32(project['goal'])
		return data 
```
